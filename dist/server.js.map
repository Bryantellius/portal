{"version":3,"sources":["/Users/phillip/working/portal/src/server/config/database.ts","/Users/phillip/working/portal/src/server/config/index.ts","/Users/phillip/working/portal/src/server/controllers/auth.controller.ts","/Users/phillip/working/portal/src/server/controllers/course.controller.ts","/Users/phillip/working/portal/src/server/controllers/lecture.controller.ts","/Users/phillip/working/portal/src/server/controllers/module.controller.ts","/Users/phillip/working/portal/src/server/controllers/quiz.controller.ts","/Users/phillip/working/portal/src/server/controllers/user.controller.ts","/Users/phillip/working/portal/src/server/db/models/accesstoken.ts","/Users/phillip/working/portal/src/server/db/models/classlist.ts","/Users/phillip/working/portal/src/server/db/models/course.ts","/Users/phillip/working/portal/src/server/db/models/curriculum.ts","/Users/phillip/working/portal/src/server/db/models/index.ts","/Users/phillip/working/portal/src/server/db/models/lecture.ts","/Users/phillip/working/portal/src/server/db/models/lecturegroup.ts","/Users/phillip/working/portal/src/server/db/models/module.ts","/Users/phillip/working/portal/src/server/db/models/quiz.ts","/Users/phillip/working/portal/src/server/db/models/quizquestion.ts","/Users/phillip/working/portal/src/server/db/models/quizquestionoption.ts","/Users/phillip/working/portal/src/server/db/models/quizquestionresponse.ts","/Users/phillip/working/portal/src/server/db/models/role.ts","/Users/phillip/working/portal/src/server/db/models/user.ts","/Users/phillip/working/portal/src/server/db/queries/users.ts","/Users/phillip/working/portal/src/server/db/query.ts","/Users/phillip/working/portal/src/server/middleware/auth.ts","/Users/phillip/working/portal/src/server/middleware/bearerstrategy.ts","/Users/phillip/working/portal/src/server/middleware/localstrategy.ts","/Users/phillip/working/portal/src/server/routes/api/admin.router.ts","/Users/phillip/working/portal/src/server/routes/api/auth.router.ts","/Users/phillip/working/portal/src/server/routes/api/course.router.ts","/Users/phillip/working/portal/src/server/routes/api/lecture.router.ts","/Users/phillip/working/portal/src/server/routes/api/module.router.ts","/Users/phillip/working/portal/src/server/routes/api/quiz.router.ts","/Users/phillip/working/portal/src/server/routes/api/user.router.ts","/Users/phillip/working/portal/src/server/routes/index.ts","/Users/phillip/working/portal/src/server/server.ts","/Users/phillip/working/portal/src/server/utils/mail/mailgun.ts","/Users/phillip/working/portal/src/server/utils/security/passwords.ts","/Users/phillip/working/portal/src/server/utils/security/tokens.ts","external \"bcrypt\"","external \"crypto\"","external \"dotenv\"","external \"express\"","external \"express-fileupload\"","external \"fs\"","external \"jsonwebtoken\"","external \"mailgun-js\"","external \"morgan\"","external \"mysql\"","external \"passport\"","external \"passport-http-bearer\"","external \"passport-local\"","external \"path\"","external \"sequelize\"","webpack/bootstrap","webpack/startup"],"names":[],"mappings":"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","file":"server.js","sourcesContent":["const dbConfig = {\n  \"development\": {\n    \"username\": \"portal\",\n    \"password\": \"CW7WuqU2TfDJ\",\n    \"database\": \"portal\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  }\n}\n\nexport default dbConfig;","import * as dotenv from \"dotenv\";\nimport * as path from \"path\";\n\nconst envFound = dotenv.config();\n\nif (!envFound) {\n  throw new Error(\"Can't read .env file!\");\n}\n\nexport default {\n  mysql: {\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_SCHEMA,\n  },\n  port: parseInt(process.env.PORT, 10),\n  secret_key: process.env.SECRET_KEY,\n  lecturesDir: path.join(__dirname, \"../src/server/lectures\")\n};","import { Request, Response, NextFunction } from \"express\";\nimport { CreateToken, ValidToken } from \"../utils/security/tokens\";\nimport db from \"../db/models\";\nimport { sendEmail } from \"../utils/mail/mailgun\";\nimport { hashPassword } from \"../utils/security/passwords\";\n\nconst listRoles = async (req: Request, res: Response, next: NextFunction) => {\n    const roles = await db.Role.findAll();\n\n    res.json(roles);\n};\n\nconst register = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        const user = req.body;\n    \n        const createUserResult: { get: any } = await db.User.create(user);\n\n        const userId = parseInt(createUserResult.get('id'));\n        const accessToken = await CreateToken({ userid: parseInt(createUserResult.get('id')) });\n\n        const changePasswordLink = `http://localhost:3000/auth/password-reset?userId=${ userId }&token=${ accessToken }`;\n        \n        // Production:\n        // const link = `https://app.truecoders.io/update/${token}&${result.insertId}`;\n    \n        // Email user with link to update password\n        const sendEmailResult: any = await sendEmail(\n            user.email,\n            \"Create Password\",\n            changePasswordLink\n        );\n    \n        res.json({\n            token: accessToken,\n            msg: \"User updated!\",\n            user: userId\n        });\n    } catch (error) {\n        console.log(error);\n        res.status(500).json(false);\n    }\n};\n\nconst login = async (req: any, res: Response, next: NextFunction) => {\n    try {\n        delete req.user.password;\n        const token = await CreateToken({ userid: req.user.UserID });\n\n        res.json({\n            token,\n            user: req.user,\n        });\n    } catch (error) {\n        console.log(\"Incorrect Log In!\");\n        res.status(500).json(false);\n    }\n};\n\nconst bulkRegister = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        if (!req.files) {\n            res.json({ msg: \"no go bro\" });\n            return;\n        }\n\n        const { roleID, courseID } = req.body;\n        const csv = (req.files.csv as any).data.toString().split(\"\\n\");\n        const columns = csv[0].split(\",\");\n\n        const subscribeTasks = Promise.all(csv.map(async (record: any, i: number) => {\n            if (i === 0) {\n                return;\n            }\n            const user: any = {};\n            record.split(\",\").forEach((col: string, idx: number) => {\n                user[columns[idx]] = col;\n            });\n            \n                \n            user.roleID = roleID;\n            user.password = \"temp\";\n            const createUserResult: any = await db.User.create(user);\n\n            const userId = parseInt(createUserResult.get('id'));\n\n            const classSubscribeResult: any = await db.ClassList.create({\n                courseID: courseID,\n                userID: userId\n            });\n\n            const accessToken = await CreateToken({ userid: userId });\n\n            // Development:\n            const link = `http://localhost:3000/auth/reset-password?userId=${ userId }&token=${ accessToken }`;\n            // Production:\n            // const link = `https://app.truecoders.io/update/${token}&${result.insertId}`;\n\n            // Email user with link to update password\n            const emailResult: any = await sendEmail(\n                user.email,\n                \"Create Password\",\n                link\n            );\n        }));\n\n        await subscribeTasks;\n        res.json({ msg: \"Received csv\" });\n    } catch (error) {\n        console.log(error);\n        res.status(500).json(false);\n    }\n}\n\nconst startPasswordReset = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        const { email } = req.body;\n        const userResult: { get: any } = await db.User.findOne({\n            where: {\n                email: email\n            }\n        });\n\n        const userId = parseInt(userResult.get('id'));\n\n        const accessToken = await CreateToken({ userid: userId });\n\n        const link = `http://localhost:3000/auth/reset-password?userId=${ userId }&token=${ accessToken }`;\n\n        // Email user with link to update password\n        const emailResult = await sendEmail(\n            email,\n            \"Reset Password\",\n            link\n        );\n\n        res.json({\n            accessToken,\n            msg: \"Password reset link sent successfully\",\n            user: userResult,\n        });\n    } catch (error) {\n        console.log(error);\n        res.status(500).json(false);\n    }\n  };\n\n  const resetPassword = async (req: Request, res: Response, next: NextFunction) => {\n    const {\n        password\n    } = req.body.user;\n\n    const {\n        token\n    } = req.body.creds;\n\n    const userId = parseInt(req.body.creds.userId.toString());\n\n    const isAuthenticated = await ValidToken(token, userId);\n\n    if (!isAuthenticated) {\n        throw new Error(\"Invalid token. Please try again later.\");\n    }\n\n    const userUpdateModel = {\n        id: userId,\n        password: hashPassword(password)\n    };\n\n    const updateResult = await db.User.update(userUpdateModel, {\n        where: {\n            id: userId\n        }\n    });\n\n    res.json(updateResult);\n  }\n  \n\nexport default {\n    login,\n    register,\n    bulkRegister,\n    resetPassword,\n    startPasswordReset,\n    listRoles\n};","import { Request, Response, NextFunction } from \"express\";\nimport db from \"../db/models\";\n\nconst findAll = async (req: Request, res: Response, next: NextFunction) => {\n    const courses = await db.Course.findAll();\n\n    res.json(courses);\n}\n\nexport default {\n    findAll\n};","import db from \"../db/models\";\nimport { Request, Response, NextFunction } from \"express\";\nimport path from \"path\";\n\nconst { Lecture, LectureGroup, Quiz, QuizQuestion, QuizQuestionOption, Module } = db;\n\nconst findAll = async (req: Request, res: Response, next: NextFunction) => {\n\n    const { lectureGroupId } = req.params;\n\n    const findOptions: any = {\n        include: { all: true }\n    };\n\n    if (lectureGroupId !== undefined) {\n        findOptions.where = {\n            lectureGroupId: lectureGroupId\n        };\n    }\n    \n    const lectures = await db.Lecture.findAll(findOptions);\n\n    res.json(lectures);\n}\n\nconst findById = async (req: Request, res: Response, next: NextFunction) => {\n    const lecture = await Lecture.findByPk(parseInt(req.params.id), {\n        include: { all: true }\n    });\n\n    res.json(lecture);\n}\n\nconst findByCurriculumId = async (req: Request, res: Response, next: NextFunction) => {\n    const lectureGroups = await LectureGroup.findAll({\n        include: [{\n            model: Module,\n            attributes: [ \"curriculumId\" ],\n            where: {\n                curriculumId: req.params.curriculumId\n            }\n        }, {\n            all: true,\n            nested: true\n        }]\n    });\n\n    res.json(lectureGroups);\n};\n\nconst findByLectureGroupId = async (req: any, res: any) => {\n    const lecture = await Lecture.findAll({\n        where: {\n            lectureGroupId: req.params.lectureGroupId\n        },\n        include: { all: true }\n    });\n\n    res.json(lecture);\n};\n\nconst getLectureContent = async (req: Request, res: Response, next: NextFunction) => {\n    const { id } = req.params;\n\n    const lecture = await db.Lecture.findByPk(id);\n\n    const filePath = path.join(process.cwd(), \"src/server/lectures\", lecture.fileName);\n    res.sendFile(filePath);\n}\n\nexport default {\n    findById,\n    findByLectureGroupId,\n    findByCurriculumId,\n    getLectureContent\n};1","import { Request, Response, NextFunction } from \"express\";\nimport db from \"../db/models\";\n\nconst findAll = async (req: Request, res: Response, next: NextFunction) => {   \n    const curriculumId = parseInt(req.params.curriculumId);\n    const data = curriculumId !== undefined\n        ? await db.Module.findAll({\n            where: {\n                curriculumId: curriculumId\n            }\n        })\n        : await db.Module.findAll();\n\n    res.json(data);\n}\n\nconst findById = async (req: Request, res: Response, next: NextFunction) => {\n    const id = parseInt(req.params.id);\n\n    const module = await db.Module.findByPk(id);\n\n    res.json(module);\n}\n\nconst findByCurriculumId = async (req: Request, res: Response, next: NextFunction) => {\n    const id = parseInt(req.params.id);\n\n    const module = await db.Module.findAll({\n        where: {\n            curriculumId: req.params.id\n        }\n    });\n\n    res.json(module);\n}\n\nexport default {\n    findById,\n    findByCurriculumId,\n    findAll\n};","import db from \"../db/models\";\nimport { Request, Response, NextFunction } from \"express\";\n\nconst findById = async (req: Request, res: Response, next: NextFunction) => {\n    const { id } = req.params;\n\n    const quiz = await db.Quiz.findByPk(parseInt(id));\n\n    return res.json(quiz);\n};\n\nconst findAll = async (req: Request, res: Response, next: NextFunction) => {\n    const { lectureId } = req.params;\n\n    const quiz = await db.Quiz.findAll();\n\n    return res.json(quiz);\n};\n\nconst findByLectureId = async (req: Request, res: Response, next: NextFunction) => {\n    const { lectureId } = req.params;\n\n    const quiz = await db.Quiz.findAll({\n        where: {\n            lectureId\n        }\n    });\n\n    return res.json(quiz);\n};\n\nconst submitResponses = async (req: Request, res: Response, next: NextFunction) => {\n    const {\n        userId,\n        responses\n    } = req.body;\n\n    for (let response of responses) {\n        await db.QuizQuestionResponse.create({\n            quizQuestionId: response.quizQuestionId,\n            value: response.value,\n            userId: userId\n        });\n    }\n\n    res.json({\n        success: true\n    });\n};\n\nexport default {\n    findById,\n    findAll,\n    findByLectureId,\n    submitResponses\n};","import db from \"../db/models\";\nimport path from \"path\";\nimport { Request, Response, NextFunction } from \"express\";\nimport { writeFile } from \"fs\";\nimport { hashPassword } from \"../utils/security/passwords\";\n\nconst findById = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        const { id } = req.params;\n        const user = await db.User.findByPk(parseInt(id));\n        \n        res.json(user);\n    } catch (error) {\n        next(error);\n    }\n};\n\nconst createUser = async (req, res, next) => {\n    try {\n        const { user, classList } = req.body;\n\n        user.password = hashPassword(user.password);\n        const createResponse: any = await db.User.create(user);\n        classList.userId = createResponse.insertId;\n        const courseSubscriptionResponse: any = await db.ClassList.create(classList);\n\n        res.json(courseSubscriptionResponse);\n    } catch (error) {\n        next(error);\n    }\n};\n\nconst updateUser = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        const { id } = req.params;\n        const user = req.body;\n    \n        if (user.avatarUrl) {\n          user.avatarUrl = user.avatarUrl + path.extname(user.fileName);\n          delete user.fileName;\n        }\n    \n        const updateUserResponse: any = await db.User.update(user, {\n          where: {\n            id: id\n          }\n        });\n    \n        res.json(user);\n      } catch (error) {\n        next(error);\n      }\n}\n\nconst uploadAssets = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n        if (!req.files) {\n            res.json({ msg: \"no go bro\" });\n            return;\n        }\n\n        const newImage: any = req.files.image\n        const id = req.body.id;\n        const imagePath = path.join(\n            __dirname,\n            `../public/assets/img/${ id }${ path.extname(newImage.name) }`\n        );\n\n        const buffer = Buffer.from(newImage.data, \"base64\");\n\n        writeFile(imagePath, buffer, (err: Error) => {\n            if (err) {\n                next(err);\n            }\n            res.send({ msg: \"File Uploaded\" });\n        });\n    } catch (err) {\n        next(err);\n    }\n}\n\nexport default {\n    findById,\n    createUser,\n    updateUser,\n    uploadAssets\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class AccessToken extends Model {\n    static user: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.user = this.belongsTo(models.User);\n    }\n  };\n  AccessToken.init({\n    userId: DataTypes.INTEGER,\n    token: DataTypes.STRING,\n    expires: DataTypes.DATE\n  }, {\n    sequelize,\n    modelName: 'AccessToken',\n  });\n  return AccessToken;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class ClassList extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate (models: any) {\n    }\n  };\n  ClassList.init({\n    courseId: DataTypes.INTEGER,\n    userId: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'ClassList',\n  });\n  return ClassList;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class Course extends Model {\n    static curriculum: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      this.curriculum = this.hasOne(models.Curriculum, { foreignKey: 'curriculumId' });\n    }\n  };\n  Course.init({\n    instructorId: DataTypes.INTEGER,\n    curriculumId: DataTypes.INTEGER,\n    title: DataTypes.STRING,\n    type: DataTypes.STRING,\n    startDate: DataTypes.DATE,\n    endDate: DataTypes.DATE,\n    currentlyActive: DataTypes.BOOLEAN,\n    avatarUrl: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Course',\n  });\n  return Course;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class Curriculum extends Model {\n    static modules: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      this.modules = this.hasMany(models.Module, { foreignKey: 'curriculumId' });\n    }\n  };\n  Curriculum.init({\n    title: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Curriculum',\n  });\n  return Curriculum;\n};","import fs from \"fs\";\nimport path from \"path\";\nimport { Sequelize } from \"sequelize\";\nimport config from \"../../config/database\"\nimport AccessTokenFactory from \"./accesstoken\"\nimport ClassListFactory from \"./classlist\";\nimport CourseFactory from \"./course\";\nimport CurriculumFactory from \"./curriculum\";\nimport LectureFactory from \"./lecture\";\nimport LectureGroupFactory from \"./lecturegroup\";\nimport ModuleFactory from \"./module\";\nimport QuizFactory from \"./quiz\";\nimport QuizQuestionFactory from \"./quizquestion\";\nimport QuizQuestionOptionFactory from \"./quizquestionoption\";\nimport QuizQuestionResponseFactory from \"./quizquestionresponse\";\nimport RoleFactory from \"./role\";\nimport UserFactory from \"./user\";\n\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst envConfig = config[env];\n\nif (envConfig.use_env_variable) {\n  var sequelize = new Sequelize(process.env[envConfig.use_env_variable], envConfig);\n} else {\n  var sequelize = new Sequelize(envConfig.database, envConfig.username, envConfig.password, envConfig);\n}\n\nconst modelFiles = fs\n  .readdirSync(path.resolve(\"src/server/db/models\"))\n  .filter(file => {\n    return (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js' || file.slice(-3) === '.ts');\n  });\n\nconst db = {\n  sequelize,\n  Sequelize,\n  AccessToken: AccessTokenFactory(sequelize, Sequelize),\n  ClassList: ClassListFactory(sequelize, Sequelize),\n  Course: CourseFactory(sequelize, Sequelize),\n  Curriculum: CurriculumFactory(sequelize, Sequelize),\n  Lecture: LectureFactory(sequelize, Sequelize),\n  LectureGroup: LectureGroupFactory(sequelize, Sequelize),\n  Module: ModuleFactory(sequelize, Sequelize),\n  Quiz: QuizFactory(sequelize, Sequelize),\n  QuizQuestion: QuizQuestionFactory(sequelize, Sequelize),\n  QuizQuestionOption: QuizQuestionOptionFactory(sequelize, Sequelize),\n  QuizQuestionResponse: QuizQuestionResponseFactory(sequelize, Sequelize),\n  Role: RoleFactory(sequelize, Sequelize),\n  User: UserFactory(sequelize, Sequelize)\n};\n\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  } \n});\n\nexport default db;\n","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class Lecture extends Model {\n    filePath(arg0: string, arg1: string, filePath: any) {\n        throw new Error(\"Method not implemented.\");\n    }\n    static quiz: any;\n    static module: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.quiz = this.hasOne(models.Quiz, { foreignKey: 'lectureId' });\n    }\n  };\n  Lecture.init({\n    moduleId: DataTypes.INTEGER,\n    lectureGroupId: DataTypes.INTEGER,\n    title: DataTypes.STRING,\n    fileName: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Lecture',\n  });\n  return Lecture;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class LectureGroup extends Model {\n    static lectures: any;\n    static module: any;\n    static quiz: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.lectures = this.hasMany(models.Lecture, { foreignKey: 'lectureGroupId' });\n      this.module = this.belongsTo(models.Module, { foreignKey: 'id' });\n      this.quiz = this.hasOne(models.Quiz, { foreignKey: 'lectureGroupId' });\n    }\n  };\n  LectureGroup.init({\n    moduleId: DataTypes.INTEGER,\n    title: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'LectureGroup',\n  });\n  return LectureGroup;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class Module extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {}\n  };\n  Module.init({\n    curriculumId: DataTypes.INTEGER,\n    title: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Module',\n  });\n  return Module;\n};","import { Model } from \"sequelize\";\n\nexport default (sequelize: any, DataTypes: any) => {\n  class Quiz extends Model {\n    static questions: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.questions = this.hasMany(models.QuizQuestion, { foreignKey: 'quizId', as: 'questions' });\n    }\n  };\n  Quiz.init({\n    lectureId: DataTypes.INTEGER,\n    title: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'Quiz',\n  });\n  return Quiz;\n};","import { Model } from \"sequelize\";\n\nexport default (sequelize, DataTypes) => {\n  class QuizQuestion extends Model {\n    static quiz: any;\n    static options: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.options = this.hasMany(models.QuizQuestionOption, { foreignKey: 'quizQuestionId', as: 'options' });\n    }\n  };\n\n  QuizQuestion.init({\n    quizId: DataTypes.INTEGER,\n    text: DataTypes.STRING,\n    type: DataTypes.INTEGER,\n    sortOrder: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'QuizQuestion',\n  });\n  return QuizQuestion;\n};","import { Model } from \"sequelize\";\n \nexport default (sequelize: any, DataTypes: any) => {\n  class QuizQuestionOption extends Model {\n    static question: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {}\n  };\n\n  QuizQuestionOption.init({\n    quizQuestionId: DataTypes.INTEGER,\n    value: DataTypes.STRING,\n    text: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'QuizQuestionOption',\n  });\n  return QuizQuestionOption;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class QuizQuestionResponse extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {}\n  };\n  QuizQuestionResponse.init({\n    quizQuestionId: DataTypes.INTEGER,\n    value: DataTypes.STRING,\n    userId: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'QuizQuestionResponse',\n  });\n  return QuizQuestionResponse;\n};","import { Model } from \"sequelize\";\nexport default (sequelize, DataTypes) => {\n  class Role extends Model {\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models) {\n      // define association here\n    }\n  };\n  Role.init({\n    title: DataTypes.STRING,\n    access: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'Role',\n  });\n  return Role;\n};","import { Model } from \"sequelize\";\nexport default (sequelize: any, DataTypes: any) => {\n  class User extends Model {\n    static role: any;\n    /**\n     * Helper method for defining associations.\n     * This method is not a part of Sequelize lifecycle.\n     * The `models/index` file will call this method automatically.\n     */\n    static associate(models: any) {\n      this.role = this.hasOne(models.Role, { foreignKey: 'id' });\n    }\n  };\n  User.init({\n    firstName: DataTypes.STRING,\n    lastName: DataTypes.STRING,\n    email: DataTypes.STRING,\n    password: DataTypes.STRING,\n    roleId: DataTypes.INTEGER,\n    avatarUrl: DataTypes.STRING,\n    lastLectureId: DataTypes.INTEGER\n  }, {\n    sequelize,\n    modelName: 'User',\n  });\n  return User;\n};","import Query from \"../query\";\n\nconst findOneUserById = (userid: number) => {\n  return Query(\n    \"SELECT u.UserID, u.FirstName, u.LastName, u.email, u.password FROM USERS as u WHERE u.UserID = ?\",\n    [userid]\n  );\n};\n\nconst getOneUserById = (userid: number) => {\n  return Query(\n    \"SELECT u.UserID, u.FirstName, u.LastName, u.email, u.RoleID, u.AvatarUrl, u.LastLectureID, u._created as created, c.CurriculumID, c.Title as Course, r.Title, r.Access FROM USERS as u INNER JOIN Roles as r ON r.RoleID = u.RoleID INNER JOIN classlist as cl ON cl.UserID = u.UserID INNER JOIN courses as c ON c.CourseID = cl.CourseID WHERE u.UserID = ?\",\n    [userid]\n  );\n};\n\nconst findOneUserByEmail = (email: string) => {\n  return Query(\n    \"SELECT u.UserID, u.FirstName, u.LastName, u.email, u.password, u.RoleID, u.AvatarUrl, u.LastLectureID, r.Title, r.Access FROM USERS as u INNER JOIN Roles as r ON r.RoleID = u.RoleID WHERE u.email = ?\",\n    [email]\n  );\n};\n\nconst insertUser = (user: any) => {\n  return Query(\"INSERT INTO Users SET ?\", [user]);\n};\n\nconst insertUserToCourseList = (record: any) => {\n  return Query(\"INSERT INTO ClassList SET ?\", [record]);\n};\n\nconst updateUser = (userid: number, user: any) => {\n  return Query(\"UPDATE Users SET ? WHERE UserID = ?\", [user, userid]);\n};\n\nconst removeUser = (userid: number) => {\n  return Query(\"DELETE FROM Users WHERE UserID = ?\", [userid]);\n};\n\nexport default {\n  findOneUserByEmail,\n  findOneUserById,\n  getOneUserById,\n  insertUser,\n  insertUserToCourseList,\n  updateUser,\n  removeUser,\n};\n","import * as mysql from \"mysql\";\nimport config from \"../config\";\n\nconst connection = mysql.createPool(config.mysql);\n\nconst Query = async (query: string, values?: Array<any>) => {\n  const queryPromise = new Promise((resolve, reject) => {\n    connection.query(query, values, (err: Error, results: JSON) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(results);\n    });\n  });\n\n  const results = await queryPromise;\n  return [].slice.call(results, 0)\n};\n\nconst QuerySingle = async (query: string, values?: Array<any>) => {\n  let results = [].slice.call(await Query(query, values), 0);\n  \n  return results.length > 0\n    ? results[0]\n    : [];\n}\n\nexport {\n  QuerySingle\n};\n\nexport default Query;","import passport from \"passport\";\nimport { Request, Response, NextFunction } from \"express\";\n\nconst authenticateUser = (req: Request, res: Response, next: NextFunction) => {\n    passport.authenticate(\"bearer\", { session: false }, (err, user, info) => {\n        if (user) {\n            req.user = user;\n        }\n        \n        return next();\n    })(req, res, next);\n}\n\nexport default authenticateUser;","import passport from \"passport\";\nimport BearerStrategy from \"passport-http-bearer\";\nimport { ValidToken } from \"../utils/security/tokens\";\nimport db from \"../db/queries/users\";\nimport { IPayload } from \"../utils/types\";\n\npassport.use(\n  new BearerStrategy.Strategy(async (token, next) => {\n    try {\n      let payload: IPayload = await ValidToken(token);\n      let [user]: any = await db.findOneUserById(payload.userid);\n      if (user) {\n        next(null, user);\n      } else {\n        next(null, false);\n      }\n    } catch (error) {\n      next(error);\n    }\n  })\n);\n","import passport from \"passport\";\nimport LocalStrategy from \"passport-local\";\nimport models from \"../db/models\";\nimport { comparePassword } from \"../utils/security/passwords\";\n\npassport.serializeUser((user, next) => next(null, user));\npassport.deserializeUser((user, next) => next(null, user));\n\npassport.use(\n  new LocalStrategy.Strategy(\n    { usernameField: \"email\", session: false },\n    async (email, password, next) => {\n      try {\n        let user: any = await models.User.findOne({\n          where: {\n            email: email\n          },\n          include: [models.Role]\n        });\n        if (user && (await comparePassword(password, user.password))) {\n          next(null, user);\n        } else {\n          next(null, false);\n        }\n      } catch (error) {\n        next(error);\n      }\n    }\n  )\n);","import express from \"express\";\nimport db from \"../../db/models\";\n\nconst router = express.Router();\n\nrouter.post(\n  \"/\",\n  async (\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ) => {\n    try {\n      const lecture = req.body;\n      const createLectureResponse = await db.Lecture.create(lecture);\n      \n      res.json(createLectureResponse);\n    } catch (error) {\n      next(error);\n    }\n  }\n);\n\nexport default router;\n","import express from \"express\";\nimport fileUpload from \"express-fileupload\";\nimport passport from \"passport\"\nimport authController from \"../../controllers/auth.controller\";\n\nconst authRouter = express.Router({ mergeParams: true });\nauthRouter.use(fileUpload());\n\nauthRouter.post(\"/login\", passport.authenticate(\"local\"), authController.login);\nauthRouter.post(\"/register\", authController.register);\nauthRouter.post(\"/bulk-register\", authController.bulkRegister);\nauthRouter.post(\"/forgot-password\", authController.startPasswordReset);\nauthRouter.post(\"/reset-password\", authController.resetPassword);\nauthRouter.get(\"/roles\", authController.listRoles);\n\nexport default authRouter;","import { Router } from \"express\";\nimport courseController from \"../../controllers/course.controller\";\n\nconst courseRouter = Router({ mergeParams: true });\n\ncourseRouter.get('/', courseController.findAll);\n\nexport default courseRouter;","import { Router } from \"express\";\nimport lectureController from \"../../controllers/lecture.controller\";\n\nconst lectureRouter = Router({ mergeParams: true });\n\nlectureRouter.get(\"/\", lectureController.findByCurriculumId)\nlectureRouter.get(\"/:id\", lectureController.findById);\nlectureRouter.get(\"/:id/content\", lectureController.getLectureContent);\n\nexport default lectureRouter;","import { Router } from \"express\";\nimport moduleController from \"../../controllers/module.controller\"\n\nconst moduleRouter = Router({ mergeParams: true });\n\nmoduleRouter.get('/:id', moduleController.findById);\nmoduleRouter.get('/', moduleController.findAll);\n\nexport default moduleRouter;","import express, { Request, Response, NextFunction, Router } from \"express\";\nimport router from \"./user.router\";\nimport quizController from \"../../controllers/quiz.controller\";\n\nconst quizRouter = Router({ mergeParams: true });\n\nquizRouter.get(\"/\", async (req: Request, res: Response, next: NextFunction) => req.params.lectureId\n    ? await quizController.findByLectureId(req, res, next)\n    : await quizController.findAll(req, res, next));\n\nquizRouter.get(\"/:id\", quizController.findById);\n\nquizRouter.post(\"/:id\", quizController.submitResponses);\n\nexport default quizRouter;","import express, { Request, Response, NextFunction } from \"express\";\nimport fileUpload from \"express-fileupload\";\nimport userController from \"../../controllers/user.controller\";\n\nconst userRouter = express.Router({ mergeParams: true });\n\nuserRouter.use(fileUpload());\n\nuserRouter.get(\"/:id\", userController.findById);\n\nuserRouter.put(\"/:id\", userController.updateUser);\n\nuserRouter.post(\"/assets\", userController.uploadAssets);\n\nuserRouter.post(\"/\", userController.createUser);\n\nexport default userRouter;","import { Router } from \"express\";\nimport adminRouter from \"./api/admin.router\";\nimport authRouter from \"./api/auth.router\";\nimport lectureRouter from \"./api/lecture.router\";\nimport quizRouter from \"./api/quiz.router\";\nimport userRouter from \"./api/user.router\";\nimport authMiddleware from \"../middleware/auth\";\nimport courseRouter from \"./api/course.router\";\nimport moduleRouter from \"./api/module.router\";\n\nconst router = Router();\n\nrouter.use(authMiddleware);\n\nrouter.use(\"/admin\", adminRouter);\nrouter.use(\"/api/auth\", authRouter);\nrouter.use(\"/api/user\", userRouter);\nrouter.use(\"/api/lecture\", lectureRouter);\nrouter.use(\"/api/curriculum/:curriculumId/lecture\", lectureRouter);\nrouter.use(\"/api/curriculum/:curriculumId/module\", moduleRouter);\nrouter.use(\"/api/quiz\", quizRouter);\nrouter.use(\"/api/lecture/:lectureId/quiz\", quizRouter);\nrouter.use(\"/api/course\", courseRouter);\nrouter.use(\"/api/module\", moduleRouter);\n\nexport default router;\n","import express from \"express\";\nimport morgan from \"morgan\";\nimport path from \"path\";\nimport router from \"./routes\";\nimport config from \"./config\";\nimport passport from \"passport\";\nimport \"./middleware/bearerstrategy\";\nimport \"./middleware/localstrategy\";\n\nconst app = express();\n\napp.use(express.static(\"public\"));\napp.use(passport.initialize());\napp.use(express.json());\napp.use(morgan(\"dev\"));\n\napp.use(router);\n\napp.use(\n  \"*\",\n  (req: express.Request, res: express.Response, next: express.NextFunction) => {\n    try {\n      res.sendFile(path.join(__dirname, \"../public/index.html\"));\n    } catch (error) {\n      next(error);\n    }\n  }\n);\n\napp.use(\n  (\n    err: Error,\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ) => {\n    console.log(err);\n    res.status(500).json({ name: err.name, msg: err.message });\n  }\n);\n\napp.listen(config.port, () =>\n  console.log(\"Server listening on port \" + config.port)\n);\n","import mailgunLoader from \"mailgun-js\";\n\nconst mg = mailgunLoader({\n  apiKey: process.env.MAILGUNAPIKEY,\n  domain: process.env.MAILGUNDOMAIN,\n});\n\nconst sendEmail = (to: string, content: string, link?: string) => {\n  const todaysDate: Date = new Date();\n\n  let data = {\n    to,\n    from: \"support@truecoders.io\",\n    subject: \"TrueCoders - Account Update\",\n    text: content,\n    html: `<h1>Test</h1><p>${todaysDate.toLocaleDateString()}</p><a href='${link}'>Update Info</a>`,\n  };\n  return mg.messages().send(data);\n};\n\nexport { sendEmail };\n","import bcrypt from \"bcrypt\";\n\nexport const hashPassword = async (password: string) => {\n  const hash = await bcrypt.hash(password, 10);\n  return hash;\n};\n\nexport const comparePassword = async (password: string, hash: string) => {\n  return await bcrypt.compare(password, hash);\n};\n","import crypto from \"crypto\";\nimport jwt from \"jsonwebtoken\";\nimport models from \"../../db/models\";\nimport config from \"../../config\";\nimport { IPayload } from \"../types\";\n\nexport const CreateToken = async (payload: IPayload) => {\n  payload.unique = crypto.randomBytes(32).toString(\"hex\");\n  let token = jwt.sign(payload, config.secret_key);\n  await models.AccessToken.create({\n    userId: payload.userid,\n    token: token\n  });\n\n  return token;\n};\n\nexport const ValidToken = async (token: any, userId: number) => {\n  const payload: IPayload = <IPayload>jwt.decode(token);\n  const validatedToken: any = await models.AccessToken.findOne({\n    where: {\n      id: payload.accesstokenid,\n      userId: userId\n    }\n  });\n\n  if (!validatedToken) {\n    throw new Error(\"Invalid Token\");\n  } else {\n    return payload;\n  }\n};\n","module.exports = require(\"bcrypt\");;","module.exports = require(\"crypto\");;","module.exports = require(\"dotenv\");;","module.exports = require(\"express\");;","module.exports = require(\"express-fileupload\");;","module.exports = require(\"fs\");;","module.exports = require(\"jsonwebtoken\");;","module.exports = require(\"mailgun-js\");;","module.exports = require(\"morgan\");;","module.exports = require(\"mysql\");;","module.exports = require(\"passport\");;","module.exports = require(\"passport-http-bearer\");;","module.exports = require(\"passport-local\");;","module.exports = require(\"path\");;","module.exports = require(\"sequelize\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/server/server.ts\");\n"],"sourceRoot":""}